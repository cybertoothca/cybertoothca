<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.3.0 -->
<title>EmberJS Testing Cheat Sheet | cybertoothca.github.io</title>
<meta property="og:title" content="EmberJS Testing Cheat Sheet" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The cybertooth.io website." />
<meta property="og:description" content="The cybertooth.io website." />
<link rel="canonical" href="http://localhost:4000/emberjs-testing-cheat-sheet.html" />
<meta property="og:url" content="http://localhost:4000/emberjs-testing-cheat-sheet.html" />
<meta property="og:site_name" content="cybertoothca.github.io" />
<script type="application/ld+json">
{"name":null,"description":"The cybertooth.io website.","author":null,"@type":"WebPage","url":"http://localhost:4000/emberjs-testing-cheat-sheet.html","publisher":null,"image":null,"headline":"EmberJS Testing Cheat Sheet","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link href="/assets/css/style.css?v=5e44717e12a2014c4a78353506b34fff1119ef17" rel="stylesheet">
  </head>
  <body>
    <section>
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://localhost:4000/">cybertooth.io</a>
          </div>
        </div>
      </nav>
    </section>
    <section>
      <div class="container">
        <h1 id="emberjs-testing-cheat-sheet">EmberJS Testing Cheat Sheet</h1>
<hr />

<h2 id="skipping-tests">Skipping Tests</h2>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">skip</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'qunit'</span><span class="p">;</span>

<span class="c1">// ...</span>

<span class="c1">// simply change `test` to `skip` after importing `skip` from qunit</span>
<span class="nx">skip</span><span class="p">(</span><span class="s1">'when some test needs to be skipped'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">assert</span><span class="p">)</span> <span class="p">{</span>

<span class="p">})</span>
</code></pre>
</div>

<h2 id="trimming-carriage-returns-and-whitespace-in-assertions">Trimming Carriage Returns And Whitespace In Assertions</h2>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.some-element'</span><span class="p">).</span><span class="nx">text</span><span class="p">().</span><span class="nx">trim</span><span class="p">(),</span> <span class="s1">'Some Expected Value'</span><span class="p">);</span>
<span class="c1">// ...</span>
</code></pre>
</div>

<p>…will does not trim out whitespace from carriage returns which is really easy
to produce if you format your handlebars pleasantly.</p>

<p>The fix: use JQuery’s <code class="highlighter-rouge">$.trim(...)</code> function.  The above changes to:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// for completeness, import Ember in your test</span>
<span class="c1">// ...</span>
<span class="kr">import</span> <span class="nx">Ember</span> <span class="nx">from</span> <span class="s1">'ember'</span><span class="p">;</span>
<span class="c1">// ...</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">Ember</span><span class="p">.</span><span class="nx">$</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.some-element'</span><span class="p">).</span><span class="nx">text</span><span class="p">()),</span> <span class="s1">'Some Expected Value'</span><span class="p">);</span>
<span class="c1">// ...</span>
</code></pre>
</div>

<h2 id="freezing-dates--time">Freezing Dates &amp; Time</h2>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// import the sinon module</span>
<span class="kr">import</span> <span class="nx">sinon</span> <span class="nx">from</span> <span class="s1">'sinon'</span><span class="p">;</span>

<span class="c1">// create a test class variable that will hold your frozen clock</span>
<span class="kd">let</span> <span class="nx">CLOCK</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

<span class="nx">module</span><span class="p">(</span><span class="s1">'...'</span><span class="p">,</span> <span class="p">{</span>
  <span class="c1">// after each test restore to the system clock</span>
  <span class="na">afterEach</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">CLOCK</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">CLOCK</span><span class="p">.</span><span class="nx">restore</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="na">beforeEach</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// you could make it so that all of your tests use a fixed date &amp; time</span>
    <span class="c1">// CLOCK = sinon.useFakeTimers(new Date(2001, 8, 11).getTime());</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">'when testing a fixed date'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">assert</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// I prefer to define my frozen time in the test for readability</span>
  <span class="nx">CLOCK</span> <span class="o">=</span> <span class="nx">sinon</span><span class="p">.</span><span class="nx">useFakeTimers</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">).</span><span class="nx">getTime</span><span class="p">());</span>
  <span class="c1">// ... write your time-sensitive test</span>
  <span class="c1">// the frozen clock will be restored to system time after each test</span>
<span class="p">})</span>
</code></pre>
</div>

      </div>
    </section>
    <script src="/assets/javascript/anchor-js/anchor.min.js"></script>
    <script>anchors.add();</script>
  </body>
</html>
